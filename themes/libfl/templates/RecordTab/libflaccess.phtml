<?php

    // Set page title.
    $this->headTitle($this->translate('tabAccess') . ': ' . $this->driver->getBreadcrumb());
    $formatter = $this->recordDataFormatter();

    $exemplars = array();
    $getExemplars = $formatter->getData($driver, $formatter->getDefaults('libfl_exemplar'));
    if (isset($getExemplars['Exemplar']['value']) && !empty($getExemplars['Exemplar']['value'])) {
    $getExemplarsData = json_decode(htmlspecialchars_decode($getExemplars['Exemplar']['value']));
    $exemplars = json_decode($getExemplarsData[1][0]);
    }

    $accessMethods = array_unique($this->driver->getMethodOfAccess());
    $sortExemplars = $this->tab->sortExemplars($accessMethods, $exemplars);

    // links
    $link_login = "//opac.libfl.ru/personal/loginemployee.aspx";
    $link_registration = "//libfl.ru/ru/item/contacts";

    /*echo '<pre>';
    print_r($sortExemplars);
    echo '</pre>';*/

    /*echo '<pre>';
    print_r($accessMethods);
    echo '</pre>';*/

    foreach ($sortExemplars as $accessMethod=>$accessGroups) {
        echo "<div class='".$accessMethod."'>";
        switch ($accessMethod) {
            // Книга может быть доступна только в помещении или для выдачи на дом (в этом случае доступ не уточняется)
            case 'access_remoteAccess':
                echo "<span class='access_status access_accept'>Доступно</span>";
                echo "<span class='access_method'>".$this->transEsc($accessMethod)."</span>";
                break;
            case 'access_printAccess':
                echo "<span class='access_status access_accept'>Доступно</span>";
                echo "<span class='access_method'>".$this->transEsc($accessMethod)."</span>";
                break;
            case 'access_homeAccess':
                echo "<span class='access_status access_accept'>Доступно</span>";
                echo "<span class='access_method'>".$this->transEsc($accessMethod)."</span>";
                break;
            case 'access_libraryAccess':
                echo "<span class='access_status access_accept'>Доступно</span>";
                echo "<span class='access_method'>".$this->transEsc($accessMethod)."</span>";
                // Раскомментировать
                //echo "<p><a href='//libfl.ru/ru/item/contacts' target='_blank'>".$this->transEsc('access_drivingDirections')."</a>&nbsp;|&nbsp;<a href='//libfl.ru/ru/item/contacts' target='_blank'>".$this->transEsc('access_schedule')."</a></p>";
                break;
            case 'access_clarifyAccess':
                echo "<span class='access_status access_denied'>Недоступно</span>";
                echo "<span class='access_method'>".$this->transEsc($accessMethod)."</span>";
                break;
            default:
                echo "<span class='access_method'>".$this->transEsc($accessMethod)."</span>";
                break;
        }
        foreach ($accessGroups as $accessGroup => $accessCodes) {
            echo "<div class='access_group ".$accessGroup."'>";
            switch ($accessGroup) {
                case 'access_group_1':
                    //echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_2':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_3':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    echo "<div class='marginal_note'>"
                        ."<span>Информация по проекту</span><br>"
                        ."<a href='//libfl.ru/static/litres' target='_blank'>".$this->transEsc('access_descriptionLitres')."</a><br/>"
                        ."<a href='//libfl.ru/static/litres_how_to.pdf' target='_blank'>".$this->transEsc('access_instructionsForAccessing')."</a><br/>"
                        ."<a href='//goo.gl/EYPcrC' target='_blank'>".$this->transEsc('access_instructionsForAccessAndWorkLitres')."</a>"
                        ."</div>";
                    break;
                case 'access_group_4':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    /*echo "<div class='marginal_note'>"
                        ."<span>Информация по проекту</span><br>"
                        ."<a href='//ebooks.libfl.ru/' target='_blank'>".$this->transEsc('access_descriptionPearson')."</a><br/>"
                        ."<a href='//ebooks.libfl.ru/' target='_blank'>".$this->transEsc('access_instructionsForAccessAndWorkPearson')."</a>"
                        ."</div>";*/
                    break;
                case 'access_group_5':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    /*echo "<div class='marginal_note'>"
                        ."<span>Не знаете, как сделать заказ?</span><br>"
                        ."<a href='//ebooks.libfl.ru/' target='_blank'>".$this->transEsc('access_descriptionPrintOnDemand')."</a>"
                        ."</div>";*/
                    break;
                case 'access_group_6':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    echo "<div class='marginal_note'>"
                        ."<span>Не знаете, как сделать заказ?</span><br>"
                        ."<a href='http://opac.libfl.ru/personal/help.aspx' target='_blank'>".$this->transEsc('access_instructionsForOrderingBooksAtLibrary')."</a>"
                        ."</div>";
                    break;
                case 'access_group_7':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_8':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_9':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_10':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_11':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_12':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                case 'access_group_13':
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
                default:
                    echo "<h3 style='font-weight:bold; padding-bottom:0px;'>".$this->transEsc($accessGroup)."</h3>";
                    break;
            }
            foreach ($accessCodes as $access => $exemplar) {
                echo "<div id='group_".$access."' class='exemplar'>";
                echo "<input type='hidden' name='exemplarGroupID' value='".implode('.', $exemplar['exemplar_id'])."' class='exemplarGroupID'>";
                switch ($exemplar['exemplar_access_group']) {
                    case '1':
                        echo "<div class='clearfix'>"
                            ."<a class='cta_btn' href='".$exemplar['exemplar_hyperlink_newviewer']."' target='_blank'>".$this->transEsc('access_read')."</a>"
                            //."<span class='special-note'>Книга находится в свободном доступе</span>"
                            ."</div>";
                        break;
                    case '2':
                        echo "<ol>"
                            ."<li>".str_replace("%%link%%", "<a href='".$link_registration."' target='_blank'>".$this->transEsc('access_toRegister')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."</li>"
                            ."</ol>";
                        echo "<a class='cta_btn' href='".$exemplar['exemplar_hyperlink']."'>".$this->transEsc('access_gainAccess')."</a>";
                        break;
                    case '3':
                        echo "<ol>"
                            ."<li>".str_replace("%%link%%", "<a href='".$link_registration."' target='_blank'>".$this->transEsc('access_toRegister')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".str_replace("%%signin%%", "<a href='".$link_login."' target='_blank'>".$this->transEsc('access_sigIn')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_2'))."</li>"
                            ."</ol>";
                        //echo "<ol><li>".$this->translate(str_replace("%%link%%", "<a href='//opac.libfl.ru/WebReaderT/(S(ev5t1wja0rchxr20r5gnvh55))/Default.aspx' target='_blank'>".$this->transEsc('access_toRegister')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')))."</li></ol>";
                        echo "<a class='cta_btn' href='".$exemplar['exemplar_hyperlink']."'>".$this->transEsc('access_gainAccess')."</a>";
                        break;
                    case '4':
                        echo "<ol>"
                            ."<li>".str_replace("%%link%%", "<a href='".$link_registration."' target='_blank'>".$this->transEsc('access_toRegister')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."</li>"
                            ."</ol>";
                        echo "<a class='cta_btn' href='".$exemplar['exemplar_hyperlink']."'>".$this->transEsc('access_gainAccess')."</a>";
                        break;
                    case '5':
                        //echo "<ol><li>".$this->translate(str_replace("%%link%%", "<a href='//opac.libfl.ru/WebReaderT/(S(ev5t1wja0rchxr20r5gnvh55))/Default.aspx' target='_blank'>".$this->transEsc('access_toRegister')."</a>", $this->translate(str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_0')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."</li>"."<li>"."<strong>".$rack_location."</strong>".$this->transEsc($exemplar['exemplar_access_code'].'_3')))))."</li></ol>";
                        echo "<ol>"
                            ."<li>".str_replace("%%link%%", "<a href='".$link_registration."'>".$this->transEsc('access_toRegister')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."</li>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_0')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_3'))."</li>"
                            ."</ol>";
                        echo "<a class='cta_btn' href='//ebooks.libfl.ru/'>".$this->transEsc('access_makeRequest')."</a>";
                        break;
                    case '6':
                        if ($exemplar['exemplar_access_code'] == 1000) :
                            //echo "<ol><li>".$this->translate(str_replace("%%account%%", "<a href='//opac.libfl.ru/WebReaderT/(S(ev5t1wja0rchxr20r5gnvh55))/Default.aspx' target='_blank'>".$this->transEsc('access_account')."</a>", $this->translate(str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_2006')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')))))."</li></ol>";
                            echo "<ol>";
                            echo "<li>".str_replace("%%account%%", "<a href='".$link_login."' target='_blank'>".$this->transEsc('access_account')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>";
                            echo "<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_2007')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_2'))."</li>";
                            echo "</ol>";
                            echo $this->render('record/cart-buttons.phtml', ['id' => $this->driver->getUniqueId(), 'source' => $this->driver->getSourceIdentifier()]);
                        elseif ($exemplar['exemplar_access_code'] == 1005):
                            //echo "<ol><li>".$this->translate(str_replace("%%account%%", "<a href='//opac.libfl.ru/WebReaderT/(S(ev5t1wja0rchxr20r5gnvh55))/Default.aspx' target='_blank'>".$this->transEsc('access_account')."</a>", $this->translate(str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_2007')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')))))."</li></ol>";
                            echo "<ol>";
                            echo "<li>".str_replace("%%account%%", "<a href='".$link_login."' target='_blank'>".$this->transEsc('access_account')."</a>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>";
                            echo "<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_2007')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_2'))."</li>";
                            echo "</ol>";
                            echo $this->render('record/cart-buttons.phtml', ['id' => $this->driver->getUniqueId(), 'source' => $this->driver->getSourceIdentifier()]);
                            //echo "<a class='cta_btn' href=''>".$this->transEsc('Add to Book Bag')."</a>";
                        else:
                            echo "<div>".$this->transEsc('access_unavailableExemplarLocation')."</div>";
                            //echo "<a class='cta_btn' href=''>".$this->transEsc('Add to Book Bag')."</a>";
                            echo $this->render('record/cart-buttons.phtml', ['id' => $this->driver->getUniqueId(), 'source' => $this->driver->getSourceIdentifier()]);
                        endif;
                        break;
                    case '7':
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                            foreach ($exemplar['exemplar_inventory_number'] as $inv_number):
                                //echo "<span>".$inv_number."</span><br>";
                            endforeach;
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "</div>";

                        echo "<ol>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc($exemplar['exemplar_location'])."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."</li>"
                            ."</ol>"
                            ."<table class='inventory'><tbody>"
                            ."<tr>"
                            ."<td><strong>".$this->transEsc($exemplar['exemplar_location'])."</strong></td>"."<td><span>".$inv_number."</span></td>"
                            ."</tr>"
                            ."</tbody></table>";

                        echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        break;
                    case '8':
                        echo "<ol>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc($exemplar['exemplar_location'])."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."</li>"
                            ."</ol>";
                        echo "<a class='cta_btn' href='".$exemplar['exemplar_hyperlink']."'>".$this->transEsc('access_gainAccess')."</a>";
                        break;
                    case '9':
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                            foreach ($exemplar['exemplar_inventory_number'] as $inv_number):
                                //echo "<span>".$inv_number."</span><br>";
                            endforeach;
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "</div>";
                        echo "<div>";
                        if (is_array($exemplar['exemplar_rack_location']) && !empty($exemplar['exemplar_rack_location'][0])):
                            foreach ($exemplar['exemplar_rack_location'] as $rack_location):
                                //echo "<span>".$rack_location."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_rack_location');
                        endif;
                        echo"</div>";
                        echo "<div>";
                        if (is_array($exemplar['exemplar_placing_cipher']) && !empty($exemplar['exemplar_placing_cipher'][0])):
                            foreach ($exemplar['exemplar_placing_cipher'] as $placing_cipher):
                                //echo "<span>".$placing_cipher."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "</div>";
                        //echo "<ol><li>";
                        if ($exemplar['exemplar_access_code'] == 1007) :
                            echo $this->translate(str_replace("%%exemplar_location%%", "<strong>".$this->transEsc($exemplar['exemplar_location'])."</strong>", "<ol><li>".$this->transEsc($exemplar['exemplar_access_code'].'_1')."<strong>".$inv_number."</strong>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."<strong>".$rack_location."</strong>".$this->transEsc($exemplar['exemplar_access_code'].'_3')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_4')))."</li></ol>";
                            echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        elseif ($exemplar['exemplar_access_code'] == 1014):
                            //echo "<span>111</span>";
                            echo $this->translate(str_replace("%%exemplar_location%%", "<strong>".$this->transEsc(2009)."</strong>", "<ol><li>".$this->transEsc($exemplar['exemplar_access_code'].'_1')."<strong>".$inv_number."</strong>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."<strong>".$rack_location."</strong>".$this->transEsc($exemplar['exemplar_access_code'].'_3')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_4')))."</li></ol>";
                            echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        else:
                            echo "<div class='col-sm-12 col-md-9 col-lg-9'>".$this->transEsc('access_unavailableExemplarLocation')."</div>";
                        endif;
                        //echo "</li></ol>";
                        break;
                    case '10':
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                            foreach ($exemplar['exemplar_inventory_number'] as $inv_number):

                            endforeach;
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "<ol><li>".$this->translate(str_replace("%%exemplar_location%%", "<strong>".$this->transEsc($exemplar['exemplar_location'])."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1')."</li>"."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')))."&nbsp;<strong>".$inv_number."</strong></li></ol>";
                        echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        echo "</div>";
                        break;
                    case '11':
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                            foreach ($exemplar['exemplar_inventory_number'] as $inv_number):
                                //echo "<span>".$inv_number."</span><br>";
                            endforeach;
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "<ol>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc($exemplar['exemplar_location'])."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."&nbsp;<strong>".$inv_number."</strong></li></ol>";
                        echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        echo "</div>";
                    break;
                    case '12':
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "<ol>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc($exemplar['exemplar_location'])."</strong>", $this->transEsc($exemplar['exemplar_access_code']))."</li>"
                            ."</ol>";
                        echo "</div>";
                        break;
                    case '13':
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                            foreach ($exemplar['exemplar_inventory_number'] as $inv_number):
                                //echo "<span>".$inv_number."</span><br>";
                            endforeach;
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "<ol>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_2007')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."<strong>&nbsp;".$inv_number."</strong></li>"
                            ."</ol>";
                        echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        echo "</div>";
                        break;
                    default:
                        echo "<div>";
                        if (is_array($exemplar['exemplar_inventory_number']) && !empty($exemplar['exemplar_inventory_number'][0])):
                            foreach ($exemplar['exemplar_inventory_number'] as $inv_number):
                                //echo "<span>".$inv_number."</span><br>";
                            endforeach;
                        elseif (is_array($exemplar['exemplar_barcode']) && !empty($exemplar['exemplar_barcode'][0])):
                            foreach ($exemplar['exemplar_barcode'] as $barcode_number):
                                //echo "<span>".$barcode_number."</span><br>";
                            endforeach;
                        else:
                            echo $this->transEsc('access_not_inventory_number');
                        endif;
                        echo "<ol>"
                            ."<li>".str_replace("%%exemplar_location%%", "<strong>".$this->transEsc('access_staticLocation_2007')."</strong>", $this->transEsc($exemplar['exemplar_access_code'].'_1'))."</li>"
                            ."<li>".$this->transEsc($exemplar['exemplar_access_code'].'_2')."<strong>&nbsp;".$inv_number."</strong></li>"
                            ."</ol>";
                        echo "<a class='cta_btn' href=''>".$this->transEsc('Email this')."</a>";
                        echo "</div>";
                        break;
                }
                echo "</div>";
            }
            echo "</div>";
        }
        echo "</div>";
    }
?>
